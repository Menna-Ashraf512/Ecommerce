import{b as F}from"./chunk-IQSQYAMH.js";import{a as T,b as u,c as V,d as L,h as G,i as q,j as N,l as M,n as D}from"./chunk-PH4MJFUA.js";import{i as k}from"./chunk-CDTZA3VN.js";import"./chunk-3KDYLMZQ.js";import{Ab as c,Db as y,Fb as h,Gb as s,Ob as r,Qb as g,Ra as a,Ub as C,Vb as b,Wb as v,Z as w,ab as P,ea as S,fa as E,ga as x,gb as m,ha as f,qb as _,ub as l,yb as i,zb as n}from"./chunk-VHZDE6SP.js";function A(t,o){t&1&&(i(0,"li"),r(1,"Enter Valid Email"),n())}function B(t,o){t&1&&(i(0,"li"),r(1,"Email is required"),n())}function H(t,o){if(t&1&&(i(0,"div",7),x(),i(1,"svg",11),c(2,"path",12),n(),f(),i(3,"span",13),r(4,"Danger"),n(),i(5,"div")(6,"ul",14),m(7,A,2,0,"li")(8,B,2,0,"li"),n()()()),t&2){s();let e=v(2);a(7),l(e!=null&&e.getError("pattern")?7:-1),a(),l(e!=null&&e.getError("required")?8:-1)}}function Z(t,o){t&1&&(i(0,"span"),c(1,"i",15),n())}function z(t,o){if(t&1&&(i(0,"p",9),r(1),n()),t&2){let e=s(2);a(),g(" ",e.messageError," ")}}function R(t,o){if(t&1&&(i(0,"p",10),r(1),n()),t&2){let e=s(2);a(),g(" ",e.messageSuccess," ")}}function $(t,o){if(t&1){let e=y();i(0,"form",3),h("ngSubmit",function(){S(e);let p=s();return E(p.emailSubmit())}),i(1,"div",4),C(2),i(3,"label",5),r(4,"Email"),n(),c(5,"input",6),m(6,H,9,2,"div",7),n(),i(7,"button",8),r(8," Verify Email "),m(9,Z,2,0,"span"),n(),m(10,z,2,1,"p",9)(11,R,2,1,"p",10),n()}if(t&2){let e=s();_("formGroup",e.verifyEmail),a(2);let d=b(e.verifyEmail.get("email"));a(4),l(d!=null&&d.errors&&(d!=null&&d.touched)?6:-1),a(),_("disabled",e.verifyEmail.invalid||e.isLoading),a(2),l(e.isLoading?9:-1),a(),l(e.messageError&&!e.messageSuccess?10:e.messageSuccess?11:-1)}}function j(t,o){t&1&&(i(0,"li"),r(1,"Enter correct Code"),n())}function O(t,o){t&1&&(i(0,"li"),r(1,"Code is required"),n())}function U(t,o){if(t&1&&(i(0,"div",7),x(),i(1,"svg",11),c(2,"path",12),n(),f(),i(3,"span",13),r(4,"Danger"),n(),i(5,"div")(6,"ul",14),m(7,j,2,0,"li")(8,O,2,0,"li"),n()()()),t&2){s();let e=v(2);a(7),l(e!=null&&e.getError("pattern")?7:-1),a(),l(e!=null&&e.getError("required")?8:-1)}}function J(t,o){t&1&&(i(0,"span"),c(1,"i",15),n())}function K(t,o){if(t&1&&(i(0,"p",9),r(1),n()),t&2){let e=s(2);a(),g(" ",e.messageError," ")}}function Q(t,o){if(t&1&&(i(0,"p",10),r(1),n()),t&2){let e=s(2);a(),g(" ",e.messageSuccess," ")}}function W(t,o){if(t&1){let e=y();i(0,"form",3),h("ngSubmit",function(){S(e);let p=s();return E(p.codeSubmit())}),i(1,"div",4),C(2),i(3,"label",16),r(4,"resetCode"),n(),c(5,"input",17),m(6,U,9,2,"div",7),n(),i(7,"button",8),r(8," Verify Code "),m(9,J,2,0,"span"),n(),m(10,K,2,1,"p",9)(11,Q,2,1,"p",10),n()}if(t&2){let e=s();_("formGroup",e.verifyCode),a(2);let d=b(e.verifyCode.get("resetCode"));a(4),l(d!=null&&d.errors&&(d!=null&&d.touched)?6:-1),a(),_("disabled",e.verifyEmail.invalid||e.isLoading),a(2),l(e.isLoading?9:-1),a(),l(e.messageError&&!e.messageSuccess?10:e.messageSuccess?11:-1)}}function X(t,o){t&1&&(i(0,"li"),r(1,"Enter Valid Email"),n())}function Y(t,o){t&1&&(i(0,"li"),r(1,"Email is required"),n())}function ee(t,o){if(t&1&&(i(0,"div",7),x(),i(1,"svg",11),c(2,"path",12),n(),f(),i(3,"span",13),r(4,"Danger"),n(),i(5,"div")(6,"ul",14),m(7,X,2,0,"li")(8,Y,2,0,"li"),n()()()),t&2){s();let e=v(2);a(7),l(e!=null&&e.getError("pattern")?7:-1),a(),l(e!=null&&e.getError("required")?8:-1)}}function te(t,o){t&1&&(i(0,"li"),r(1," password must start with upperCase then from 6 to more any chars "),n())}function ie(t,o){t&1&&(i(0,"li"),r(1,"Password is required"),n())}function ne(t,o){if(t&1&&(i(0,"div",7),x(),i(1,"svg",11),c(2,"path",12),n(),f(),i(3,"span",13),r(4,"Danger"),n(),i(5,"div")(6,"ul",14),m(7,te,2,0,"li")(8,ie,2,0,"li"),n()()()),t&2){s();let e=v(8);a(7),l(e!=null&&e.getError("pattern")?7:-1),a(),l(e!=null&&e.getError("required")?8:-1)}}function oe(t,o){t&1&&(i(0,"span"),c(1,"i",15),n())}function ae(t,o){if(t&1&&(i(0,"p",9),r(1),n()),t&2){let e=s(2);a(),g(" ",e.messageError," ")}}function re(t,o){if(t&1&&(i(0,"p",10),r(1),n()),t&2){let e=s(2);a(),g(" ",e.messageSuccess," ")}}function le(t,o){if(t&1){let e=y();i(0,"form",3),h("ngSubmit",function(){S(e);let p=s();return E(p.restPassSubmit())}),i(1,"div",4),C(2),i(3,"label",5),r(4,"Email"),n(),c(5,"input",18),m(6,ee,9,2,"div",7),n(),i(7,"div",4),C(8),i(9,"label",19),r(10,"New Password"),n(),c(11,"input",20),m(12,ne,9,2,"div",7),n(),i(13,"button",8),r(14," signIn "),m(15,oe,2,0,"span"),n(),m(16,ae,2,1,"p",9)(17,re,2,1,"p",10),n()}if(t&2){let e=s();_("formGroup",e.resetPassword),a(2);let d=b(e.resetPassword.get("email"));a(4),l(d!=null&&d.errors&&(d!=null&&d.touched)?6:-1),a(2);let p=b(e.resetPassword.get("newPassword"));a(4),l(p!=null&&p.errors&&(p!=null&&p.touched)?12:-1),a(),_("disabled",e.resetPassword.invalid||e.isLoading),a(2),l(e.isLoading?15:-1),a(),l(e.messageError&&!e.messageSuccess?16:e.messageSuccess?17:-1)}}var I=class t{_formBuilder=w(M);_authService=w(F);_router=w(k);isLoading=!1;messageError="";messageSuccess="";step=1;verifyEmail=this._formBuilder.group({email:[null,[u.required,u.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]]});verifyCode=this._formBuilder.group({resetCode:[null,[u.required,u.pattern(/^[0-9]{6}$/)]]});resetPassword=this._formBuilder.group({email:[null,[u.required,u.email]],newPassword:[null,[u.required,u.pattern(/^\w{6,}$/)]]});emailSubmit(){let o=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(o),this._authService.setEmailVerify(this.verifyEmail.value).subscribe({next:e=>{console.log(e),e.statusMsg==="success"&&(this.step=2)},error:e=>{console.log(e)}})}codeSubmit(){this._authService.setCodeVerify(this.verifyCode.value).subscribe({next:o=>{console.log(o),o.status==="Success"&&(this.step=3)},error:o=>{console.log(o)}})}restPassSubmit(){this._authService.setResetPass(this.resetPassword.value).subscribe({next:o=>{console.log(o),localStorage.setItem("userToken",o.token),this._authService.saveUserData(),this._router.navigate(["/home"])},error:o=>{console.log(o)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-forget-password"]],decls:6,vars:3,consts:[[1,"w-1/2","mx-auto","bg-gray-50","p-4","rounded","border","shadow","my-10"],[1,"text-3xl","font-light","text-center","text-main"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"mb-2"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","email","type","email","id","email",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["type","submit",1,"btn-main","px-4","py-2","mt-3",3,"disabled"],[1,"bg-red-400","text-white","py-4","px-2","border","text-center"],[1,"bg-green-600","text-white","py-4","px-2","border","text-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fa","fa-spin","fa-spinner"],["for","resetCode",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","resetCode","type","text","id","resetCode",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["formControlName","email","readOnly","","type","email","id","email",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["for","newPassword",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","newPassword","type","password","id","newPassword",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"]],template:function(e,d){e&1&&(i(0,"section",0)(1,"h1",1),r(2,"Forget Password"),n(),m(3,$,12,6,"form",2)(4,W,12,6,"form",2)(5,le,18,8,"form",2),n()),e&2&&(a(3),l(d.step==1?3:-1),a(),l(d.step==2?4:-1),a(),l(d.step==3?5:-1))},dependencies:[D,G,T,V,L,q,N],encapsulation:2})};export{I as ForgetPasswordComponent};
