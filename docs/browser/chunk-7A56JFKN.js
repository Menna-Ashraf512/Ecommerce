import{b as N}from"./chunk-IQSQYAMH.js";import{a as P,b as c,c as V,d as G,h as M,i as A,j as D,l as I,n as H}from"./chunk-PH4MJFUA.js";import{i as q}from"./chunk-CDTZA3VN.js";import"./chunk-3KDYLMZQ.js";import{Ab as s,Db as L,Fb as F,Gb as u,Ob as o,Qb as E,Ra as a,Ub as x,Vb as _,Wb as b,Z as S,ab as T,ea as y,fa as R,ga as g,gb as d,ha as f,qb as k,ub as m,yb as t,zb as i}from"./chunk-VHZDE6SP.js";function B(e,r){e&1&&(t(0,"li"),o(1,"Name Should be more than or equal 3 chars"),i())}function z(e,r){e&1&&(t(0,"li"),o(1,"Name Should be less than or equal 20 chars"),i())}function $(e,r){e&1&&(t(0,"li"),o(1,"Name is required"),i())}function j(e,r){if(e&1&&(t(0,"div",6),g(),t(1,"svg",18),s(2,"path",19),i(),f(),t(3,"span",20),o(4,"Danger"),i(),t(5,"div")(6,"ul",21),d(7,B,2,0,"li")(8,z,2,0,"li")(9,$,2,0,"li"),i()()()),e&2){u();let n=b(5);a(7),m(n!=null&&n.getError("minlength")?7:-1),a(),m(n!=null&&n.getError("maxlength")?8:-1),a(),m(n!=null&&n.getError("required")?9:-1)}}function U(e,r){e&1&&(t(0,"li"),o(1,"Enter Valid Email"),i())}function J(e,r){e&1&&(t(0,"li"),o(1,"Email is required"),i())}function K(e,r){if(e&1&&(t(0,"div",6),g(),t(1,"svg",18),s(2,"path",19),i(),f(),t(3,"span",20),o(4,"Danger"),i(),t(5,"div")(6,"ul",21),d(7,U,2,0,"li")(8,J,2,0,"li"),i()()()),e&2){u();let n=b(11);a(7),m(n!=null&&n.getError("pattern")?7:-1),a(),m(n!=null&&n.getError("required")?8:-1)}}function O(e,r){e&1&&(t(0,"li"),o(1," password must start with upperCase then from 6 to more any chars "),i())}function Q(e,r){e&1&&(t(0,"li"),o(1,"Password is required"),i())}function W(e,r){if(e&1&&(t(0,"div",6),g(),t(1,"svg",18),s(2,"path",19),i(),f(),t(3,"span",20),o(4,"Danger"),i(),t(5,"div")(6,"ul",21),d(7,O,2,0,"li")(8,Q,2,0,"li"),i()()()),e&2){u();let n=b(17);a(7),m(n!=null&&n.getError("pattern")?7:-1),a(),m(n!=null&&n.getError("required")?8:-1)}}function X(e,r){e&1&&(t(0,"li"),o(1," password must start with upperCase then from 6 to more any chars "),i())}function Y(e,r){e&1&&(t(0,"li"),o(1,"Password is required"),i())}function ee(e,r){e&1&&(t(0,"li"),o(1,"this password not Confirmed"),i())}function te(e,r){if(e&1&&(t(0,"div",6),g(),t(1,"svg",18),s(2,"path",19),i(),f(),t(3,"span",20),o(4,"Danger"),i(),t(5,"div")(6,"ul",21),d(7,X,2,0,"li")(8,Y,2,0,"li")(9,ee,2,0,"li"),i()()()),e&2){let n=u(),l=b(23);a(7),m(l!=null&&l.getError("pattern")?7:-1),a(),m(l!=null&&l.getError("required")?8:-1),a(),m(n.registerForm.getError("mismatch")?9:-1)}}function ie(e,r){e&1&&(t(0,"li"),o(1,"accept only egypt phone numbers"),i())}function ne(e,r){e&1&&(t(0,"li"),o(1,"phone is required"),i())}function re(e,r){if(e&1&&(t(0,"div",6),g(),t(1,"svg",18),s(2,"path",19),i(),f(),t(3,"span",20),o(4,"Danger"),i(),t(5,"div")(6,"ul",21),d(7,ie,2,0,"li")(8,ne,2,0,"li"),i()()()),e&2){u();let n=b(29);a(7),m(n!=null&&n.getError("pattern")?7:-1),a(),m(n!=null&&n.getError("required")?8:-1)}}function ae(e,r){e&1&&(t(0,"span"),s(1,"i",22),i())}function oe(e,r){if(e&1&&(t(0,"p",16),o(1),i()),e&2){let n=u();a(),E(" ",n.messageError," ")}}function le(e,r){if(e&1&&(t(0,"p",17),o(1),i()),e&2){let n=u();a(),E(" ",n.messageSuccess," ")}}var Z=class e{authService=S(N);router=S(q);_formBuilder=S(I);isLoading=!1;messageError="";messageSuccess="";selectedImage=null;userId=null;tempImage=null;image;registerForm=this._formBuilder.group({name:[null,[c.required,c.minLength(3),c.maxLength(30)]],email:[null,[c.required,c.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],password:[null,[c.required,c.pattern(/^\w{6,}$/)]],rePassword:[null,[c.required]],phone:[null,[c.required,c.pattern(/^01[0125][0-9]{8}$/)]]},{validators:this.confirmPassword});submitForm(){this.registerForm.valid?(this.isLoading=!0,this.authService.sendRegisterForm(this.registerForm.value).subscribe({next:r=>{console.log(r),r.message==="success"&&(this.userId=r.userId,this.messageSuccess=r.message,setTimeout(()=>{this.router.navigate(["/login"])},500)),this.isLoading=!1},error:r=>{console.log(r),this.messageError=r.error.message,this.isLoading=!1}})):this.registerForm.markAllAsTouched()}confirmPassword(r){let n=r.get("password")?.value,l=r.get("rePassword")?.value;return n===l?null:{mismatch:!0}}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=T({type:e,selectors:[["app-register"]],decls:39,vars:14,consts:[[1,"w-1/2","mx-auto","bg-gray-50","p-4","rounded","border","shadow","my-10"],[1,"text-3xl","font-light","text-center","text-main","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-2"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","name","type","text","id","name",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","email","type","email","id","email",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","password","type","password","id","password",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["for","repassword",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","rePassword","type","password","id","repassword",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","phone","type","tel","id","phone",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["type","submit",1,"btn-main","px-4","py-2","mt-5",3,"disabled"],[1,"bg-red-400","text-white","py-4","px-2","border","text-center"],[1,"bg-green-600","text-white","py-4","px-2","border","text-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fa","fa-spin","fa-spinner"]],template:function(n,l){if(n&1){let p=L();t(0,"section",0)(1,"h1",1),o(2,"Register Now"),i(),t(3,"form",2),F("ngSubmit",function(){return y(p),R(l.submitForm())}),t(4,"div",3),x(5),t(6,"label",4),o(7,"Name"),i(),s(8,"input",5),d(9,j,10,3,"div",6),i(),t(10,"div",3),x(11),t(12,"label",7),o(13,"Email"),i(),s(14,"input",8),d(15,K,9,2,"div",6),i(),t(16,"div",3),x(17),t(18,"label",9),o(19,"Password"),i(),s(20,"input",10),d(21,W,9,2,"div",6),i(),t(22,"div",3),x(23),t(24,"label",11),o(25,"RePassword"),i(),s(26,"input",12),d(27,te,10,3,"div",6),i(),t(28,"div",3),x(29),t(30,"label",13),o(31,"Phone"),i(),s(32,"input",14),d(33,re,9,2,"div",6),i(),t(34,"button",15),o(35," SignUp "),d(36,ae,2,0,"span"),i(),d(37,oe,2,1,"p",16)(38,le,2,1,"p",17),i()()}if(n&2){a(3),k("formGroup",l.registerForm),a(2);let p=_(l.registerForm.get("name"));a(4),m(p!=null&&p.errors&&(p!=null&&p.touched)?9:-1),a(2);let C=_(l.registerForm.get("email"));a(4),m(C!=null&&C.errors&&(C!=null&&C.touched)?15:-1),a(2);let h=_(l.registerForm.get("password"));a(4),m(h!=null&&h.errors&&(h!=null&&h.touched)?21:-1),a(2);let w=_(l.registerForm.get("rePassword"));a(4),m(l.registerForm.getError("mismatch")&&(w!=null&&w.touched)?27:-1),a(2);let v=_(l.registerForm.get("phone"));a(4),m(v!=null&&v.errors&&(v!=null&&v.touched)?33:-1),a(),k("disabled",l.registerForm.invalid||l.isLoading),a(2),m(l.isLoading?36:-1),a(),m(l.messageError&&!l.messageSuccess?37:l.messageSuccess?38:-1)}},dependencies:[H,M,P,V,G,A,D],encapsulation:2})};export{Z as RegisterComponent};
