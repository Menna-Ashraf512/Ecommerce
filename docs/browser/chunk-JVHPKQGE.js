import{a as M}from"./chunk-Y53QA6CX.js";import{a as j}from"./chunk-TM6OZZCA.js";import{j as V}from"./chunk-CDTZA3VN.js";import{Ab as m,Db as b,Ec as L,Fb as d,Gb as s,Jb as I,Oa as S,Ob as a,Qb as p,Ra as o,Z as w,Zb as T,ab as y,bc as v,dc as g,ea as u,fa as _,ga as h,gb as C,ha as k,pc as P,qb as f,ub as x,wb as E,xb as D,yb as r,zb as n}from"./chunk-VHZDE6SP.js";var B=(i,e)=>e.product._id,F=i=>["/checkout",i];function G(i,e){i&1&&(r(0,"div",9),m(1,"img",11),r(2,"h4",12),a(3,"No Product"),n(),r(4,"p"),a(5,"Go find the Product You Like"),n()())}function U(i,e){if(i&1){let t=b();r(0,"div",15)(1,"div",13),m(2,"img",16),n(),r(3,"div",17),a(4),n(),r(5,"div",17),a(6),v(7,"currency"),n(),r(8,"div",18)(9,"a",19),d("click",function(){let c=u(t).$implicit,O=s(3);return _(O.removeItem(c.product._id))}),a(10,"Remove"),n()()()}if(i&2){let t=e.$implicit;o(2),I("alt",t.product.title),f("src",t.product.imageCover,S),o(2),p(" ",t.product.title," "),o(2),p(" ",g(7,4,t.price,"EGP")," ")}}function $(i,e){if(i&1){let t=b();r(0,"div",10)(1,"div",13)(2,"h3"),a(3),v(4,"currency"),n(),r(5,"button",14),d("click",function(){u(t);let c=s(2);return _(c.clearUserCart())}),a(6,"Clear All"),n()(),E(7,U,11,7,"div",15,B),n()}if(i&2){let t=s(2);o(3),p("Total Cart Price : ",g(4,1,t.cartDetails.totalCartPrice,"EGP")," "),o(4),D(t.cartDetails.products)}}function R(i,e){if(i&1&&C(0,G,6,0,"div",9)(1,$,9,4,"div",10),i&2){let t=s();x(t.cartDetails.products.length===0?0:1)}}var N=class i{cartService=w(j);drawer;cartDetails={};constructor(){P(()=>{let e=this.cartService.cartNumber();this.getCart()})}ngOnInit(){let e=document.getElementById("drawer-disabled-backdrop");e&&(this.drawer=new M(e,{backdrop:!1})),this.getCart()}closeDrawer(){this.drawer&&this.drawer.hide()}getCart(){this.cartService.getLoggedUserCart().subscribe({next:e=>{console.log(e.data),this.cartDetails=e.data},error:e=>{console.log(e)}})}removeItem(e){this.cartService.removeSpecificCardItem(e).subscribe({next:t=>{console.log(t),this.cartDetails=t.data,this.cartService.cartNumber.set(t.numOfCartItems)},error:t=>{console.log(t)}})}clearUserCart(){this.cartService.clearCart().subscribe({next:e=>{console.log(e.data),e.message==="success"&&(this.cartDetails.products.length=0,this.cartService.cartNumber.set(0))},error:e=>{console.log(e)}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-cart-side"]],decls:14,vars:4,consts:[["id","drawer-disabled-backdrop","tabindex","-1","aria-labelledby","drawer-disabled-backdrop-label",1,"fixed","top-0","left-0","z-40","h-screen","p-4","overflow-y-auto","transition-transform","-translate-x-full","bg-white","w-64","dark:bg-gray-800"],["id","drawer-disabled-backdrop-label",1,"text-base","font-semibold","text-gray-500","uppercase","dark:text-gray-400"],["type","button","data-drawer-hide","drawer-disabled-backdrop","aria-controls","drawer-disabled-backdrop",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","absolute","top-2.5","end-2.5","inline-flex","items-center","justify-center","dark:hover:bg-gray-600",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"flex","gap-3","mt-7"],["type","button","routerLink","/cart","data-drawer-hide","drawer-disabled-backdrop","aria-controls","drawer-disabled-backdrop",1,"btn-main","p-3",3,"click"],[1,"btn-main","p-3",3,"click","routerLink"],[1,"flex","justify-center","flex-col","gap-y-3","items-center","my-3"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],["src","images/addCart.jpg","alt","emptyCart",1,"w-full","h-[400px]","object-cover"],[1,"font-semibold","text-3xl"],[1,"p-4"],[1,"btn-main","px-3","py-2","mt-3",3,"click"],[1,"flex","flex-col"],[1,"w-16","md:w-32","max-w-full","max-h-full",3,"src","alt"],[1,"px-6","py-4","font-semibold","text-gray-900"],[1,"px-6","py-4"],[1,"font-medium","text-red-600","dark:text-red-500","hover:underline","cursor-pointer",3,"click"]],template:function(t,l){t&1&&(r(0,"div",0)(1,"h5",1),a(2," Menu"),n(),r(3,"button",2),d("click",function(){return l.closeDrawer()}),h(),r(4,"svg",3),m(5,"path",4),n(),k(),r(6,"span",5),a(7,"Close menu"),n()(),C(8,R,2,1),r(9,"div",6)(10,"button",7),d("click",function(){return l.closeDrawer()}),a(11,"view Cart"),n(),r(12,"button",8),d("click",function(){return l.closeDrawer()}),a(13,"Payment"),n()()()),t&2&&(o(8),x(l.cartDetails?8:-1),o(4),f("routerLink",T(2,F,l.cartDetails._id)))},dependencies:[V,L],encapsulation:2})};export{N as a};
