import{b as D}from"./chunk-IQSQYAMH.js";import{a as V,b as g,c as G,d as M,e as q,f as w,h as A,i as Z,j as I,n as H}from"./chunk-PH4MJFUA.js";import{i as T,j as N}from"./chunk-CDTZA3VN.js";import"./chunk-3KDYLMZQ.js";import{Ab as c,Db as y,Fb as F,Gb as u,Ob as a,Qb as C,Ra as r,Ub as _,Vb as h,Wb as S,Z as f,ab as L,ea as E,fa as k,ga as x,gb as s,ha as b,qb as v,ub as m,yb as t,zb as i}from"./chunk-VHZDE6SP.js";function z(e,n){e&1&&(t(0,"li"),a(1,"Enter Valid Email"),i())}function R(e,n){e&1&&(t(0,"li"),a(1,"Email is required"),i())}function j(e,n){if(e&1&&(t(0,"div",6),x(),t(1,"svg",14),c(2,"path",15),i(),b(),t(3,"span",16),a(4,"Danger"),i(),t(5,"div")(6,"ul",17),s(7,z,2,0,"li")(8,R,2,0,"li"),i()()()),e&2){u();let o=S(5);r(7),m(o!=null&&o.getError("pattern")?7:-1),r(),m(o!=null&&o.getError("required")?8:-1)}}function $(e,n){e&1&&(t(0,"li"),a(1," password must start with upperCase then from 6 to more any chars "),i())}function B(e,n){e&1&&(t(0,"li"),a(1,"Password is required"),i())}function U(e,n){if(e&1&&(t(0,"div",6),x(),t(1,"svg",14),c(2,"path",15),i(),b(),t(3,"span",16),a(4,"Danger"),i(),t(5,"div")(6,"ul",17),s(7,$,2,0,"li")(8,B,2,0,"li"),i()()()),e&2){u();let o=S(11);r(7),m(o!=null&&o.getError("pattern")?7:-1),r(),m(o!=null&&o.getError("required")?8:-1)}}function J(e,n){e&1&&(t(0,"span"),c(1,"i",18),i())}function K(e,n){if(e&1&&(t(0,"p",12),a(1),i()),e&2){let o=u();r(),C(" ",o.messageError," ")}}function O(e,n){if(e&1&&(t(0,"p",13),a(1),i()),e&2){let o=u();r(),C(" ",o.messageSuccess," ")}}var P=class e{authService=f(D);router=f(T);isLoading=!1;messageError="";messageSuccess="";loginForm=new q({email:new w(null,[g.required,g.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]),password:new w(null,[g.required,g.pattern(/^\w{6,}$/)])});submitForm(){this.loginForm.valid&&(this.isLoading=!0,this.authService.sendLoginForm(this.loginForm.value).subscribe({next:n=>{console.log(n),n.message==="success"&&(console.log(this.authService.userData),localStorage.setItem("userToken",n.token),this.authService.saveUserData(),setTimeout(()=>{this.router.navigate(["/home"])},500),this.messageSuccess=n.message),this.isLoading=!1},error:n=>{console.log(n),this.messageError=n.error.message,this.isLoading=!1}}))}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=L({type:e,selectors:[["app-login"]],decls:24,vars:8,consts:[[1,"w-1/2","mx-auto","bg-gray-50","p-4","rounded","border","shadow","my-10"],[1,"text-3xl","font-light","text-center","text-main"],[3,"ngSubmit","formGroup"],[1,"mb-2"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","email","type","email","id","email",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-black"],["formControlName","password","type","password","id","password",1,"bg-white","border","border-gray-300","text-black","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],[1,"flex","justify-end","gap-4","items-center","mt-5"],["routerLink","/forget-password",1,"hover:underline","transition-all","duration-150","text-blue-600"],["type","submit",1,"btn-main","px-4","py-2",3,"disabled"],[1,"bg-red-400","text-white","py-4","px-2","border","text-center"],[1,"bg-green-600","text-white","py-4","px-2","border","text-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fa","fa-spin","fa-spinner"]],template:function(o,l){if(o&1){let d=y();t(0,"section",0)(1,"h1",1),a(2,"Login Now"),i(),t(3,"form",2),F("ngSubmit",function(){return E(d),k(l.submitForm())}),t(4,"div",3),_(5),t(6,"label",4),a(7,"Email"),i(),c(8,"input",5),s(9,j,9,2,"div",6),i(),t(10,"div",3),_(11),t(12,"label",7),a(13,"Password"),i(),c(14,"input",8),s(15,U,9,2,"div",6),i(),t(16,"div",9)(17,"a",10),a(18,"ForgetPassword"),i(),t(19,"button",11),a(20," SignIn "),s(21,J,2,0,"span"),i()(),s(22,K,2,1,"p",12)(23,O,2,1,"p",13),i()()}if(o&2){r(3),v("formGroup",l.loginForm),r(2);let d=h(l.loginForm.get("email"));r(4),m(d!=null&&d.errors&&(d!=null&&d.touched)?9:-1),r(2);let p=h(l.loginForm.get("password"));r(4),m(p!=null&&p.errors&&(p!=null&&p.touched)?15:-1),r(4),v("disabled",l.loginForm.invalid||l.isLoading),r(2),m(l.isLoading?21:-1),r(),m(l.messageError&&!l.messageSuccess?22:l.messageSuccess?23:-1)}},dependencies:[H,A,V,G,M,Z,I,N],encapsulation:2})};export{P as LoginComponent};
