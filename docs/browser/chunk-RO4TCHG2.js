import{a as R}from"./chunk-D33AZZIR.js";import{a as N}from"./chunk-TM6OZZCA.js";import{a as V,b as h,c as D,d as I,h as M,i as q,j as G,l as O,n as H}from"./chunk-PH4MJFUA.js";import{g as w,i as T}from"./chunk-CDTZA3VN.js";import"./chunk-3KDYLMZQ.js";import{Ab as c,Db as F,Fb as E,Gb as b,Ob as a,Ra as r,Ub as k,Vb as v,Wb as x,Z as p,ab as L,ea as y,fa as S,ga as g,gb as m,ha as C,qb as _,ub as d,yb as e,zb as i}from"./chunk-VHZDE6SP.js";function P(t,n){t&1&&(e(0,"li"),a(1,"Enter Valid Details"),i())}function A(t,n){t&1&&(e(0,"li"),a(1,"Details is required"),i())}function Z(t,n){if(t&1&&(e(0,"div",6),g(),e(1,"svg",14),c(2,"path",15),i(),C(),e(3,"span",16),a(4,"Danger"),i(),e(5,"div")(6,"ul",17),m(7,P,2,0,"li")(8,A,2,0,"li"),i()()()),t&2){b();let o=x(5);r(7),d(o!=null&&o.getError("pattern")?7:-1),r(),d(o!=null&&o.getError("required")?8:-1)}}function j(t,n){t&1&&(e(0,"li"),a(1,"accept only egypt phone numbers"),i())}function $(t,n){t&1&&(e(0,"li"),a(1,"phone is required"),i())}function z(t,n){if(t&1&&(e(0,"div",6),g(),e(1,"svg",14),c(2,"path",15),i(),C(),e(3,"span",16),a(4,"Danger"),i(),e(5,"div")(6,"ul",17),m(7,j,2,0,"li")(8,$,2,0,"li"),i()()()),t&2){b();let o=x(11);r(7),d(o!=null&&o.getError("pattern")?7:-1),r(),d(o!=null&&o.getError("required")?8:-1)}}function J(t,n){t&1&&(e(0,"li"),a(1,"accept only egypt phone numbers"),i())}function K(t,n){t&1&&(e(0,"li"),a(1,"phone is required"),i())}function Q(t,n){if(t&1&&(e(0,"div",6),g(),e(1,"svg",14),c(2,"path",15),i(),C(),e(3,"span",16),a(4,"Danger"),i(),e(5,"div")(6,"ul",17),m(7,J,2,0,"li")(8,K,2,0,"li"),i()()()),t&2){b();let o=x(17);r(7),d(o!=null&&o.getError("pattern")?7:-1),r(),d(o!=null&&o.getError("required")?8:-1)}}function U(t,n){t&1&&(e(0,"span"),c(1,"i",18),i())}function W(t,n){t&1&&(e(0,"span"),c(1,"i",18),i())}var B=class t{_formBuilder=p(O);_activatedRoute=p(w);_orderService=p(R);_router=p(T);_cartService=p(N);cartId="";isLoading=!1;isLoadingCash=!1;dataShipping;checkoutForm=this._formBuilder.group({details:[null,[h.required,h.minLength(10)]],phone:[null,[h.required,h.pattern(/^01[0-9]{9}$/)]],city:[null,[h.required]]});ngOnInit(){this._activatedRoute.paramMap.subscribe(n=>{this.cartId=n.get("id")})}submitFormOnline(){this.isLoading=!0,this._orderService.checkOutSession(this.cartId,this.checkoutForm.value).subscribe({next:n=>{console.log(n),n.status==="success"&&open(n.session.url,"_self"),this.isLoading=!1,this._cartService.cartNumber.set(0)},error:n=>{console.log(n)}})}submitFormCash(){this.isLoadingCash=!0,this._orderService.checkOutCash(this.cartId,this.checkoutForm.value).subscribe({next:n=>{console.log(n),this.isLoading=!1,n.status=="success"&&this._router.navigate(["/allorders"]),this._cartService.cartNumber.set(0)},error:n=>{console.log(n)}})}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=L({type:t,selectors:[["app-checkout"]],decls:29,vars:11,consts:[[1,"m-sec-style","w-[50%]","mx-auto"],[1,"text-center","text-main","text-3xl"],[1,"my-6",3,"formGroup"],[1,"mb-6"],["for","details",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["id","details","formControlName","details",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-500","dark:placeholder-main","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["id","phone","type","tel","formControlName","phone",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-500","dark:placeholder-main","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],["for","city",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["id","city","type","text","formControlName","city",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-main","focus:border-main","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-500","dark:placeholder-main","dark:text-black","dark:focus:ring-main","dark:focus:border-main"],[1,"flex","justify-center"],[1,"btn-main","px-5","py-2","rounded-sm",3,"click","disabled"],[1,"btn-main","px-5","py-2","block","ms-auto","rounded-sm",3,"click","disabled"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fa","fa-spin","fa-spinner"]],template:function(o,l){if(o&1){let s=F();e(0,"section",0)(1,"h1",1),a(2,"Check Out"),i(),e(3,"form",2)(4,"div",3),k(5),e(6,"label",4),a(7,"Details"),i(),c(8,"textarea",5),m(9,Z,9,2,"div",6),i(),e(10,"div",3),k(11),e(12,"label",7),a(13,"Phone"),i(),c(14,"input",8),m(15,z,9,2,"div",6),i(),e(16,"div",3),k(17),e(18,"label",9),a(19,"City"),i(),c(20,"input",10),m(21,Q,9,2,"div",6),i(),e(22,"div",11)(23,"button",12),E("click",function(){return y(s),S(l.submitFormOnline())}),a(24,"online Payment "),m(25,U,2,0,"span"),i(),e(26,"button",13),E("click",function(){return y(s),S(l.submitFormCash())}),a(27,"cash Payment "),m(28,W,2,0,"span"),i()()()()}if(o&2){r(3),_("formGroup",l.checkoutForm),r(2);let s=v(l.checkoutForm.get("details"));r(4),d(s!=null&&s.errors&&(s!=null&&s.touched)?9:-1),r(2);let u=v(l.checkoutForm.get("phone"));r(4),d(u!=null&&u.errors&&(u!=null&&u.touched)?15:-1),r(2);let f=v(l.checkoutForm.get("city"));r(4),d(f!=null&&f.errors&&(f!=null&&f.touched)?21:-1),r(2),_("disabled",l.checkoutForm.invalid||l.isLoading),r(2),d(l.isLoading?25:-1),r(),_("disabled",l.checkoutForm.invalid||l.isLoadingCash),r(2),d(l.isLoadingCash?28:-1)}},dependencies:[H,M,V,D,I,q,G],encapsulation:2})};export{B as CheckoutComponent};
